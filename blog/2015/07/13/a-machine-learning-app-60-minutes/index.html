
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>A machine learning app in 60 minutes - Pegasus99</title>
  <meta name="author" content="Mahmoud Mohsen">

   
  <meta name="description" content="The personal blog for Mahmoud Mohsen, A web developer and independent researcher">
  
  <meta name="keywords" content="Mahmoud Mohsen, Tanta engineering, computer sceince, programming, python, web development, machine learning">

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://pegasus99.github.io/blog/2015/07/13/a-machine-learning-app-60-minutes">
  <link href="/favicon.png" rel="icon">
  <link href='http://fonts.googleapis.com/css?family=Quicksand:300,400' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300' rel='stylesheet' type='text/css'>
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Pegasus99" type="application/atom+xml">
  <script src="/js/jquery.js"></script>
  <script src="/js/bootstrap-collapse.js"></script>
  <script src="/js/modernizr-2.0.js"></script>
  <script src="/js/octopress.js" type="text/javascript"></script>
  <script src="/js/application.js"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <div class="navbar navbar-inverse navbar-static-top">
  	<div class="navbar-inner">
  	  <div class="container">
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".navbar-responsive-collapse">
          <span class="fui-menu-24"></span>
        </a>
  	  	<div class="nav-collapse collapse navbar-responsive-collapse" style="height:0;">
  	      <ul class="nav">
    
        <li ><a href="/index.html">Blog</a></li>
    
        <li ><a href="./blog/archives/">Archive</a></li>
    
        <li ><a href="/about.html">About</a></li>
    
</ul>

<ul class="nav pull-right">
    
    <li><a href="http://github.com/Pegasus99" title="Github Profile"><i class="icon-github-sign social-navbar"></i></a></li>
    
    
    
    <li><a href="http://linkedin.com/in/mahmoudmohsen1" title="Linkedin Profile"><i class="icon-linkedin-sign social-navbar"></i></a></li>
    
    
    <li><a href="http://twitter.com/Pegasus99" title="Twitter Profile"><i class="icon-twitter-sign social-navbar"></i></a></li>
    
    
    
    

    
</ul>

  	    </div>
  	  </div>
  	</div>
  </div>
  <div class="container" id="main">
      <div class="row-fluid">
        <div id="content">
          <div>
<article class="hentry" role="article">
  

  <header>
  <div class="jumbotron">
    A Machine Learning App in 60 Minutes
	<h5>








  


<i class="icon-calendar-empty"></i> <time datetime="2015-07-13T16:46:35+02:00" pubdate data-updated="true"></time></h5>
  </div>
</header>
  <div class="row-fluid">
    <div class="span12">
      <p><br/></p>

<p>What are we going to make exactly ?</p>

<p>a simple web app that takes four words and finds out the odd word among the four.
<a href="http://pegasus99.pythonanywhere.com/"> click here to see a life demo </a>.</p>

<p>prequests:</p>

<p>-basic knowledge of python and machine learning. </br>
-basic knowledge of server side and client side scripting and html.</br>
-familiarity with flask will be useful but not required.</br></p>

<p>description:</p>

<p>Lately, I was looking for a minimal project on machine learning, after hours of searching</p>

<p>I found the solution,<a href="https://www.kaggle.com/"> Kaggle </a>.</p>

<p>Kaggle is a platform for data prediction competitions, it has a lot of great tutorials. the knowledge competitions is the best place for beginners.</p>

<p>One of the competitions that I really liked is <a href="https://www.kaggle.com/c/word2vec-nlp-tutorial"> Bag of Words Meets Bags of Popcorn  </a>. This competition presented <a href="https://code.google.com/p/word2vec/"> google&rsquo;s word2vec </a>.</p>

<p>To simplify the word2vec and what it does, Think of it as a black box that takes as an input pieces of text and
it gives as an output vectors representation of this text, Which later can be used as features for machine learning algorithms (to do stuff like sentimental analysis and so on).</p>

<p>What is cool about word2vec this vector representation maintain relation between words, so that we can say vector(&lsquo;Paris&rsquo;) - vector(&lsquo;France&rsquo;) + vector(&lsquo;Italy&rsquo;) results in a vector that is very close to vector(&lsquo;Rome&rsquo;).</p>

<p>So far so good, now let&rsquo;s get it started !</p>

<p><a href="https://www.kaggle.com/c/word2vec-nlp-tutorial/details/part-2-word-vectors"> first complete this tutorial to get the model.  </a></p>

<p>I assume now you have a word2vec model, cool, let&rsquo;s go and do some nasty stuff with it.</p>

<p>I choosed <a href="http://flask.pocoo.org/"> flask </a> &ldquo;a web development framework for python&rdquo; to implement our app.. but why ?</p>

<p>I will let you look at the code to figure out yourself</p>

<figure class='code'><figcaption><span>title:"app.py" </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">os</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">gensim.models</span> <span class="kn">import</span> <span class="n">word2vec</span>
</span><span class='line'>
</span><span class='line'><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span><span class="n">render_template</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span><span class="n">json</span><span class="p">,</span><span class="n">jsonify</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c">#this part to get the absolute path to our model file</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">sys</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">imp</span> <span class="kn">import</span> <span class="nb">reload</span>
</span><span class='line'><span class="nb">reload</span><span class="p">(</span><span class="n">sys</span><span class="p">)</span>
</span><span class='line'><span class="n">sys</span><span class="o">.</span><span class="n">setdefaultencoding</span><span class="p">(</span><span class="s">&#39;utf8&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c">#type here the model name you have during kaggle&#39;s tutorial.</span>
</span><span class='line'><span class="n">model_name</span> <span class="o">=</span> <span class="s">&quot;300features_40minwords_10context.gensim&quot;</span>
</span><span class='line'><span class="n">my_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">__file__</span><span class="p">)</span>
</span><span class='line'><span class="n">model_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">my_dir</span><span class="p">,</span> <span class="n">model_name</span><span class="p">)</span>
</span><span class='line'><span class="n">model</span> <span class="o">=</span> <span class="n">word2vec</span><span class="o">.</span><span class="n">Word2Vec</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">model_file_path</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># this one &quot;index.html&quot; is the default page , containing an html form. </span>
</span><span class='line'><span class="nd">@app.route</span><span class="p">(</span><span class="s">&#39;/&#39;</span><span class="p">)</span>
</span><span class='line'><span class="k">def</span> <span class="nf">hello</span><span class="p">():</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s">&#39;index.html&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># this one handles the request made by an Ajax post, caused by the form&#39;s button</span>
</span><span class='line'><span class="nd">@app.route</span><span class="p">(</span><span class="s">&#39;/ajaxhandler&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;POST&#39;</span><span class="p">])</span>
</span><span class='line'><span class="k">def</span> <span class="nf">ajax_handler</span><span class="p">():</span>
</span><span class='line'>    <span class="n">first</span> <span class="o">=</span>  <span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s">&#39;first&#39;</span><span class="p">]</span>
</span><span class='line'>    <span class="n">second</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s">&#39;second&#39;</span><span class="p">]</span>
</span><span class='line'>    <span class="n">third</span><span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s">&#39;third&#39;</span><span class="p">]</span>
</span><span class='line'>    <span class="n">fourth</span> <span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s">&#39;fourth&#39;</span><span class="p">]</span>
</span><span class='line'>    <span class="n">result</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">doesnt_match</span> <span class="p">((</span><span class="s">&quot;</span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">first</span><span class="p">,</span><span class="n">second</span><span class="p">,</span><span class="n">third</span><span class="p">,</span><span class="n">fourth</span><span class="p">))</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s">&#39;result&#39;</span><span class="p">:</span><span class="n">result</span>  <span class="p">})</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="n">__name__</span><span class="o">==</span><span class="s">&quot;__main__&quot;</span><span class="p">:</span>
</span><span class='line'>    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<p>So this is it? really ? it&rsquo;s python baby&hellip; one file of code and our server side scripting is done.</p>

<p><a href="https://github.com/Pegasus99/word_2_vec/">  Here is the complete source code for the project </a></p>

<p>Now let&rsquo;s test it locally. type :</p>

<figure class='code'><figcaption><span>title:"shell" </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>python <span class="s2">&quot;absolute path to app.py file&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>for example on my linux machine the command will be like:</p>

<figure class='code'><figcaption><span>title:"shell" </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>python  /home/pegasus/word_2_vec
</span></code></pre></td></tr></table></div></figure>


<p>after you type this command you should see something like this</p>

<figure class='code'><figcaption><span>title:"shell" </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'> * Running on http://127.0.0.1:5000/ <span class="o">(</span>Press CTRL+C to quit<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>so far so good .. let&rsquo;s put it online but where ?</p>

<p>Among many choices for hosting . I powerfully recommend <a href="https://www.pythonanywhere.com/">pythonanywhere </a>&hellip; it&rsquo;s dedicated for python, so you won&rsquo;t need to configure any thing.
They have also a great tutorial about how to use it. the free account is enough for our app.</p>

<p>I know this is not a complete tutorial, but I&rsquo;m a big fan of the DRY concept (don&rsquo;t repeat your self).</p>

<p>That was quick and simple, But simplicity is a virtue (Edsger Dijkstra) &hellip;now you have made a cool app in no time . I hope you guys enjoyed such as I did on writing this tutorial. see you soon.</p>

    </div>
  </div>



  <footer>
    <hr>
    
    <div class="row-fluid">
      
      <div class="span6">
        <p class="meta">
        
        



  <a href="/blog/categories/machine-learning/"><span class="badge">machine learning</span></a>

  <a href="/blog/categories/kaggle/"><span class="badge">kaggle</span></a>

  <a href="/blog/categories/word2vec/"><span class="badge">word2vec</span></a>

  <a href="/blog/categories/python/"><span class="badge">python</span></a>

  <a href="/blog/categories/flask/"><span class="badge">flask</span></a>




        </p>
      </div>
      
      <div class="span6 social-sharing">
        <div class="sharing">
  <div class="addthis_toolbox addthis_default_style ">
  
  
  <a class="addthis_button_tweet"></a>
  
  
  <a class="addthis_counter addthis_pill_style"></a>
  </div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
</div>

      </div>
      
      
    </div>
    
    <div class="row-fluid">
      <div class="span12">
        <p class="meta">
          
          
        </p>
      </div>
    </div>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>



        </div>
      </div>
      <div class="row-fluid">
        <footer class="footer-page" role="contentinfo">
          <p>
  Copyright &copy; 2015 - Mahmoud Mohsen -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span> - Theme by <a href="http://alexgaribay.com">Alex Garibay</a>
</p>


        </footer>
      </div>
  </div>
  

<script type="text/javascript">
      var disqus_shortname = 'Pegasus99';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://pegasus99.github.io/blog/2015/07/13/a-machine-learning-app-60-minutes/';
        var disqus_url = 'http://pegasus99.github.io/blog/2015/07/13/a-machine-learning-app-60-minutes/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
